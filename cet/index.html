<html>
    <head>

        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link href=/static/css/main.css rel="stylesheet" type="text/css">
        <title>è®°çˆ¬å–CET4çº§ç½‘ç«™çš„é‚£ä¸€å¤œ</title>
    </head>
    <body>
        <h2>é¦–å…ˆ:</h2>

<div class="codehilite"><pre><span></span>ä¸­ç§‹èŠ‚å¿«ä¹
</pre></div>

<h2>ç„¶å:</h2>

<div class="codehilite"><pre><span></span>æ²¡æœ‰äº†...
</pre></div>

<h2>å›å¯å®¤ä¹‹å‰åœ¨304çš„æ™šä¸Š</h2>

<p>è½¬çœ¼é—´å°±å¤§äºŒäº†ï¼Œäºæ˜¯å°±è¦è€ƒå››çº§ï¼Œè€ƒå››çº§å°±è¦æŠ¥åï¼Œäºæ˜¯å»äº†æŠ¥åç½‘ç«™http://cet.tinyin.net/accuse.asp, ä¸Šä¼ äº†ç…§ç‰‡ï¼ŒæŠ¥äº†å,ç†è®ºä¸Šå°±ç»“æŸäº†ã€‚ä½†æ˜¯ï¼Œä¸­ç§‹è¦æ¥äº†ï¼Œæˆ‘è¦åšç‚¹ä»€ä¹ˆã€‚<br/>
å››çº§æŠ¥åç½‘ç«™ä¸ºäº†å…¬å¹³å…¬æ­£ï¼Œå°†æ¯ä¸ªæŠ¥åå­¦ç”Ÿçš„åŸºæœ¬ä¿¡æ¯(å§“åã€å­¦å·ã€å¤§å¤´ç…§ã€æŠ¥è€ƒç­‰çº§)æ”¾åœ¨äº†ç½‘ä¸Šï¼Œè¿™æ ·åŒå­¦é™¢ã€åŒå¹´çº§çš„åŒå­¦å°±å¯ä»¥è¿›è¡Œç›‘ç£ã€‚ä¸å¾—ä¸è¯´ï¼Œè¯ä»¶ç…§æ˜¯å¾ˆå¸å¼•äººçš„éƒ¨åˆ†ï¼Œäºæ˜¯æˆ‘å®¡æŸ¥äº†é¡µé¢å…ƒç´ ï¼Œå¸Œæœ›å¯ä»¥å‘ç°æ›´å¤šaã€‚</p>

<div class="codehilite"><pre><span></span><span class="nt">&lt;img</span> <span class="na">width=</span><span class="s">&quot;120&quot;</span> <span class="na">border=</span><span class="s">&quot;0&quot;</span> <span class="na">height=</span><span class="s">&quot;160&quot;</span> <span class="na">src=</span><span class="s">&quot;photos/2014210761.jpg&quot;</span><span class="nt">&gt;&lt;/img&gt;</span>
</pre></div>

<p><code>photos/2014210761.jpg</code>ï¼Œæœ‰æ„æ€ï¼Œçœ‹ä¸Šå»ä¼¼ä¹æ˜¯æŸä¸ªå­ç›®å½•ï¼Œäºæ˜¯æˆ‘å°è¯•åŠ ä¸Šäº†ä¸»æœºå</p>

<div class="codehilite"><pre><span></span>http://cet.tinyin.net/photos/2014210761.jpg
</pre></div>

<p>äºæ˜¯æˆ‘å¯çˆ±çš„è¯ä»¶ç…§å‡ºç°äº†ã€‚ã€‚ã€‚è€Œä¸”ï¼Œç­‰æˆ‘ç™»å½•è¿‡æœŸåï¼Œæˆ‘ä¾ç„¶å¯ä»¥è®¿é—®è¿™ä¸ªurlçœ‹åˆ°å›¾ç‰‡(ç°åœ¨å°±å¯ä»¥è¯•è¯•)ï¼ï¼è¿™æ„å‘³ç€æˆ‘å¯ä»¥é€šè¿‡æ”¹å˜å­¦å·çœ‹åˆ°åŒå­¦çš„å¤§å¤´ç…§!ğŸ˜„</p>

<h2>ç„¶è€Œæˆ‘å¹¶ä¸çŸ¥é“å­¦å·</h2>

<p>æ˜¯çš„ï¼Œæˆ‘çŸ¥é“æˆ‘çš„åŒå­¦çš„åå­—ï¼Œä½†æ˜¯è®°ä¸ä½å­¦å·ã€‚ä½†æ˜¯CET4æŠ¥åç½‘ç«™å·²ç»å°†å§“åå­¦å·ä¸€å¹¶å¥‰ä¸Šäº†ï¼Œæˆ‘è¦åšçš„å°±æ˜¯æŠ“å–å§“åå’Œå­¦å·ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯å†™å…¥æ–‡ä»¶ï¼Œå»ºç«‹å…³ç³»ï¼Œå°±åƒè¿™æ ·:</p>

<div class="codehilite"><pre><span></span>å­¦ç”Ÿå­¦å·ï¼š2014210761 å­¦ç”Ÿå§“åï¼šæœ±æ‰¿æµ©
å­¦ç”Ÿå­¦å·ï¼š2014210781 å­¦ç”Ÿå§“åï¼šæˆ‘å®¤å‹
......  ......  ....... .....  ......
</pre></div>

<h2>ä¹°äº†ä¸¤ç“¶å•¤é…’ğŸº ï¼Œå¼€çˆ¬! å½“ç„¶è¿˜æœ‰ httpfox</h2>

<h3>æ¨¡æ‹Ÿç™»å½•</h3>

<p>é¦–å…ˆå°±æ˜¯è¦ç™»å½•è¿›æŠ¥åç½‘ç«™ï¼Œæ‰å¯ä»¥è®¿é—®ä¿¡æ¯é¡µçš„urlã€‚æ‰“å¼€ httpfoxï¼Œç›‘å¬ç™»å½•è¿‡ç¨‹
<img alt="ç›‘å¬è¿‡ç¨‹" src="http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-27%20ä¸Šåˆ4.31.54.png" /> <br/>
<img alt="ç›¸å…³ä¿¡æ¯" src="http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-27%20ä¸Šåˆ4.34.51.png" /> <br/>
CET4ç½‘ç«™ä¸ºäº†é˜²æˆ‘è¿™ç§å¥½å¥‡å¿ƒå¾ˆå¼ºçš„äººè¿˜æ˜¯åšäº†ä¸€äº›å¤„ç†ï¼Œç™»å½•url<code>/login.asp</code>å®é™…ä¸Šæ˜¯ä¸€ä¸ªreferï¼ŒçœŸæ­£çš„ç™»å½•urlæ˜¯<code>http://cet.tinyin.net/reginfo.asp</code>ï¼Œæˆ‘è¦åšçš„ï¼Œå°±æ˜¯åˆ©ç”¨æˆ‘çš„ç”¨æˆ·åå’Œå¯†ç ç™»å…¥ç½‘ç«™ï¼Œè·å–cookieï¼Œç„¶ååˆ©ç”¨cookieè¿›è¡Œåç»­ç™»å½•ã€‚å½“ç„¶ï¼Œé¦–å…ˆéœ€è¦æŠŠæˆ‘è‡ªå·±å˜æˆæµè§ˆå™¨å•¦</p>

<div class="codehilite"><pre><span></span>def __init__(self):
    self.user_agent = &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:42.0) Gecko/20100101 Firefox/42.0&quot;
    self.headers = {
            &#39;User-Agent&#39;:self.user_agent,
            &#39;Referer&#39;:&#39;http://cet.tinyin.net/login.asp&#39;,
            &#39;Accept-encoding&#39;:&#39;gzip&#39;
    }
    self.postdata = urllib.urlencode({
            &#39;stype&#39;:&#39;#&#39;,
            &#39;stuno&#39;:&#39;2014214761&#39;,
            &#39;stupwd&#39;:&#39;å¯†ç å°±ä¸è¯´äº†&#39;
    })
</pre></div>

<p>ç„¶åå°±æ˜¯ç™»å½•è·å–cookie</p>

<div class="codehilite"><pre><span></span>def analog_login(self):
    &quot;&quot;&quot;
    ç™»å½•cet4ç½‘ç«™ï¼Œè·å–cookieï¼Œå¹¶å°†
    cookieä¿å­˜è‡³æ–‡ä»¶
    &quot;&quot;&quot;
    filename = &#39;cet4_cookie.txt&#39;
    cookie = cookielib.MozillaCookieJar(filename)
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookie))

    login_url = &#39;http://cet.tinyin.net/reginfo.asp&#39;
    request = urllib2.Request(login_url, self.postdata, self.headers)
    opener.open(request)
    cookie.save(ignore_discard=True, ignore_expires=True)
</pre></div>

<p>cookie get!!!</p>

<div class="codehilite"><pre><span></span># Netscape HTTP Cookie File
# http://www.netscape.com/newsref/std/cookie_spec.html
# This is a generated file!  Do not edit.

cet.tinyin.net  FALSE   /   FALSE       ASPSESSlllllDAQBASRAC   LKNFEMDCDOLABMFPLLLLL
</pre></div>

<h3>è¯¥æ­£åˆ™è¡¨è¾¾å¼ä¸Šåœºäº†!</h3>

<p>é¦–å…ˆå®éªŒä¸€ä¸‹ï¼Œcookieèƒ½å¦æ­£å¸¸ä½¿ç”¨, å°è¯•è®¿é—® http://cet.tinyin.net/accuse.asp é¡µé¢, cookieæ˜¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯htmlå´æ˜¯ä¸­æ–‡ä¹±ç ï¼Œæ²¡å…³ç³»ï¼Œæ”¹æˆutf-8ï¼Œå°±è¡Œ</p>

<div class="codehilite"><pre><span></span>html = response.read().decode(&#39;gbk&#39;).encode(&#39;utf-8â€™)
</pre></div>

<p><img alt="html" src="http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-25%20ä¸‹åˆ11.48.57.png" /> <br/>
ç°åœ¨ï¼Œä¸€åˆ‡éƒ½è±ç„¶å¼€æœ—äº†ï¼Œæˆ‘åªéœ€è¦çˆ¬å–<td>æ ‡ç­¾ï¼Œå°†è·å–çš„å­¦å·å’Œå§“åå†™å…¥æ–‡ä»¶å°±è¡Œäº†ã€‚</p>

<div class="codehilite"><pre><span></span>æ­£åˆ™è¡¨è¾¾å¼ parttern = re.compile(&#39;&lt;td width=25% &gt;(.*?)&lt;br&gt;&lt;br&gt;(.*?)&lt;br&gt;&lt;br&gt;&#39;, re.S)
</pre></div>

<p><a href="https://github.com/neo1218/CET4-photo/blob/master/stuinfo.txt">çˆ¬å–çš„ä¿¡æ¯æ–‡ä»¶</a> <br/></p>

<h3>flask é ä½ äº†</h3>

<p>æ¥ä¸‹æ¥å°±æ˜¯ç”¨flaskæ­ä¸€ä¸ªæœç´¢å¼•æ“äº†ã€‚åœ¨æ–‡å­—ç¼–ç è¿™ä¸€å—ç”¨äº†å¾ˆé•¿æ—¶é—´ï¼Œå› ä¸ºè¡¨å•çš„è¾“å…¥æ•°æ®ç¼–ç å’Œæ–‡ä»¶çš„ç¼–ç æ˜¯ä¸åŒ¹é…çš„ï¼Œç»è¿‡å‡ æ¬¡å®éªŒï¼Œæˆ‘å‘ç°éœ€è¦å°†è¡¨å•è¾“å…¥æ•°æ®decodeä¸ºæ±‰å­—ç¼–ç </p>

<div class="codehilite"><pre><span></span>name = form.name.data.decode(&#39;utf-8&#39;)
</pre></div>

<p>ç¼–ç çœŸå¤´ç—›ï¼ï¼çœ‹ä¸€ä¸‹è¿™ç¯‡å§http://dengshuan.me/misc/xi-shuo-bian-ma-yu-luan-ma.html <br/></p>

<h3>okäº†</h3>

<p><img alt="æœ‰å›¾ä¸ºè¯" src="http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-27%20ä¸Šåˆ5.22.50.png" /> <br/></p>

<h2>å¤‡æ³¨</h2>

<h4>å®é™…çš„è¿‡ç¨‹æ²¡æœ‰ä¸Šé¢è¯´çš„è¿™ä¹ˆçš„ä¸€æ°”å‘µæˆï¼Œä¸­é—´è¿˜ç¡äº†ä¸€è§‰ğŸ˜„ <br/></h4>

<h4>ä¸¤ç“¶å•¤é…’æ²¡æœ‰å–å®Œ<br/></h4>

<h4>ä¿¡æ¯éƒ½æ˜¯å…¬å¼€çš„ï¼Œåº”è¯¥æ²¡æœ‰ä¾µçŠ¯éšç§å§ğŸ˜” <br/></h4>

<h4>å¼€å¿ƒå°±å¥½ğŸ˜„ <br/></h4>

        <div id="disqus_thread"></div>
        <script>
        /**
        * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
        */
        /*
        var disqus_config = function () {
        this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        */
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//neo1218flask.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </body>
</html>
